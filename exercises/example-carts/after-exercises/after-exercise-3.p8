pico-8 cartridge // http://www.pico-8.com
version 39
__lua__
-- constants
max_speed = 1.5

function _init()
 player = {
  x = 64,
  y = 64,
  dx = 0,
  dy = 0,
  spd = 1,
  jump = 1,
  on_ground = 0
 }
end

function _draw()
 cls()
 camera(player.x-24,0)
 map()
 spr(1,player.x,player.y)
end

function _update60()
 local p = player
 -- apply gravity
 p.dy=p.dy+0.05
 -- left/ right
 if (btn(‚û°Ô∏è)) then
  p.dx=p.dx+0.05
 end
 if (btn(‚¨ÖÔ∏è)) then
  p.dx=p.dx-0.05
 end
  -- jump
 if btnp(üÖæÔ∏è) and
  (p.on_ground or p.jump<1) then
  p.on_ground=false
  p.jump+=1
  p.dy=p.dy-2
 end
 
  -- check wall coll
 if hit(p.x+p.dx,p.y,7,7,1) then
  player.dx=0
 end

 -- check ground coll
 if hit(p.x,p.y+p.dy,7,7,1) then
  if p.dy>0 then
   p.on_ground=true
  end
   p.dy=0
 end

 -- decel if on ground
 if p.on_ground then
  p.dx=p.dx*0.97
  p.jump=0
 end

 -- max acceleration
 if p.dx > max_speed then
  p.dx = max_speed
 end

 -- update forward/ upward motion
 p.y=p.y+p.dy
 p.x=p.x+p.dx
end
-->8
-- collision function
function hit(x,y,w,h,flag)
 collide=false

 for i=x,x+w,w do
  if (fget(mget(i/8,y/8))==flag) or
         (fget(mget(i/8,(y+h)/8))==flag) then
   collide=true
  end
 end

 return collide
end
__gfx__
00000000660000009999999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006660005a9222222900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700066600509255552900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000006600509259952900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000888809259952900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000888809255552900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000100109222222900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000110119999999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000002020202000000000000000000000202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000002020202000002020202000000000000020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000202000000000000000002020202020202020000000202020002020202020202020200020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000202000000000000000202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
